/* Table styles for the rich text editor */

/* Base table styles */
.editor table {
	border-collapse: collapse;
	table-layout: auto;
	width: 100%;
	margin: 1rem 0;
	background-color: white;
	border: 1px solid #e5e7eb;
	border-radius: 8px;
	overflow: hidden;
	box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

/* Table headers */
.editor table th {
	background-color: #f9fafb;
	border: 1px solid #e5e7eb;
	padding: 12px 16px;
	text-align: left;
	font-weight: 600;
	color: #374151;
	font-size: 14px;
	position: relative;
}

/* Table cells */
.editor table td {
	border: 1px solid #e5e7eb;
	padding: 12px 16px;
	color: #374151;
	font-size: 14px;
	vertical-align: top;
	position: relative;
}

/* Hover effects */
.editor table tr:hover td {
	background-color: #f9fafb;
}

/* Selected cell highlighting */
.editor table td.selected-cell,
.editor table th.selected-cell {
	background-color: #eff6ff;
	border: 2px solid #3b82f6;
	box-shadow: inset 0 0 0 1px #3b82f6;
}

/* Merged cells */
.editor table td[colspan],
.editor table th[colspan] {
	background-color: #fefce8;
	border-color: #eab308;
}

.editor table td[rowspan],
.editor table th[rowspan] {
	background-color: #fefce8;
	border-color: #eab308;
}

/* Table resize handles */
.editor table .table-resize-handle {
	position: absolute;
	right: -3px;
	top: 0;
	height: 100%;
	width: 6px;
	cursor: col-resize;
	background-color: #3b82f6;
	opacity: 0;
	transition: opacity 0.2s ease-in-out;
	z-index: 10;
	border-radius: 2px;
}

.editor table th:hover .table-resize-handle,
.editor table td:hover .table-resize-handle {
	opacity: 0.7;
}

.editor table .table-resize-handle:hover {
	background-color: #1d4ed8;
	opacity: 1;
	width: 8px;
	right: -4px;
}

/* Row resize handles */
.editor table tr .row-resize-handle {
	position: absolute;
	bottom: -2px;
	left: 0;
	right: 0;
	height: 4px;
	cursor: row-resize;
	background-color: #3b82f6;
	opacity: 0;
	transition: opacity 0.2s;
}

.editor table tr:hover .row-resize-handle {
	opacity: 1;
}

.editor table tr .row-resize-handle:hover {
	background-color: #1d4ed8;
}

/* Responsive table wrapper */
.editor .table-wrapper {
	overflow-x: auto;
	margin: 1rem 0;
	border-radius: 8px;
	box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

/* Mobile responsive tables */
@media (max-width: 768px) {
	.editor table {
		font-size: 12px;
	}

	.editor table th,
	.editor table td {
		padding: 8px 12px;
	}

	/* Stack table cells on very small screens */
	.editor table.mobile-stacked {
		display: block;
	}

	.editor table.mobile-stacked thead,
	.editor table.mobile-stacked tbody,
	.editor table.mobile-stacked th,
	.editor table.mobile-stacked td,
	.editor table.mobile-stacked tr {
		display: block;
	}

	.editor table.mobile-stacked thead tr {
		position: absolute;
		top: -9999px;
		left: -9999px;
	}

	.editor table.mobile-stacked tr {
		border: 1px solid #e5e7eb;
		border-bottom: none;
		margin-bottom: 0.5rem;
	}

	.editor table.mobile-stacked td {
		border: none;
		border-bottom: 1px solid #e5e7eb;
		position: relative;
		padding-left: 50%;
	}

	.editor table.mobile-stacked td:before {
		content: attr(data-label) ": ";
		position: absolute;
		left: 12px;
		width: 45%;
		padding-right: 10px;
		white-space: nowrap;
		font-weight: bold;
		color: #6b7280;
	}
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
	.editor table {
		background-color: #1f2937;
		border-color: #374151;
	}

	.editor table th {
		background-color: #111827;
		border-color: #374151;
		color: #f9fafb;
	}

	.editor table td {
		border-color: #374151;
		color: #d1d5db;
	}

	.editor table tr:hover td {
		background-color: #111827;
	}

	.editor table td.selected-cell,
	.editor table th.selected-cell {
		background-color: #1e3a8a;
		border-color: #3b82f6;
	}
}

/* Print styles */
@media print {
	.editor table {
		box-shadow: none;
		border: 1px solid #000;
	}

	.editor table th,
	.editor table td {
		border-color: #000;
	}

	.editor table .table-resize-handle,
	.editor table .row-resize-handle {
		display: none;
	}
}

/* High contrast mode */
@media (prefers-contrast: high) {
	.editor table {
		border-width: 2px;
	}

	.editor table th,
	.editor table td {
		border-width: 2px;
	}

	.editor table td.selected-cell,
	.editor table th.selected-cell {
		border-width: 3px;
	}
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

	.editor table .table-resize-handle,
	.editor table .row-resize-handle {
		transition: none;
	}

	.editor table tr:hover td {
		transition: none;
	}
}

/* Node hover menu styles */
.node-hover-area {
	position: relative;
	width: 100%;
	height: 20px;
	margin-top: -10px;
	margin-bottom: -10px;
	overflow: visible;
}

.node-hover-bar {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	background-color: #ffffff;
	border: 1px solid #d1d5db;
	border-radius: 6px;
	padding: 6px 12px;
	box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
	z-index: 9999;
	cursor: pointer;
	align-items: center;
	gap: 6px;
	font-size: 12px;
	color: #374151;
	font-weight: 500;
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.2s ease-in-out;
	display: flex;
}

.node-hover-bar:hover {
	opacity: 1 !important;
	background-color: #f8fafc;
}

.node-hover-bar button {
	background: none;
	border: none;
	cursor: pointer;
	padding: 2px;
	border-radius: 3px;
	display: flex;
	align-items: center;
	justify-content: center;
	color: #3b82f6;
	font-size: 16px;
}

.node-hover-bar button:hover {
	background-color: #e0e7ff;
}

/* Dark mode support for hover menu */
@media (prefers-color-scheme: dark) {
	.node-hover-bar {
		background-color: #1e293b;
		border-color: #334155;
		color: #94a3b8;
	}

	.node-hover-bar:hover {
		background-color: #334155;
	}

	.node-hover-bar button {
		color: #60a5fa;
	}

	.node-hover-bar button:hover {
		background-color: #1e40af;
	}
}